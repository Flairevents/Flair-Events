<div class="d-flex flex-row bd-highlight" style='margin-bottom: 40px;'>
  <div style='max-width: 444px;'>
    <div class="v2-profile-identification-uk">Share Code</div>

    <div class="d-flex flex-row">
      <div class="d-flex flex-column bd-highlight " style='margin-top: 15px;'>
        <div class="d-flex ">
          <div class="d-flex flex-column align-items-center">
            <%= text_field_tag :share_code, @prospect.share_code.presence || nil, required: true, class: "form-control v2-profile-identification-passport-text-inputs v2-inputs", placeholder: 'XXX-XXX-XXX', style: 'margin-left: 0px; max-width: 420px;', autocomplete: "off", 'data-inputmask-regex':"[a-za-zA-Z0-9]{3}-[a-za-zA-Z0-9]{3}-[a-za-zA-Z0-9]{3}", pattern: "[a-za-zA-Z0-9]{3}-[a-za-zA-Z0-9]{3}-[a-za-zA-Z0-9]{3}", title: "Valid Share Code (ie. 9WY-6GY-2S2)"%>
            
            <span class='form-check-label v2-profile-identification-checkbox-label' style='margin-left:0;'>Need a share code:</span>
            
            <a href="https://www.gov.uk/view-prove-immigration-status" target="_blank" class='form-check-label v2-profile-identification-checkbox-label' style='margin-left:0;'>www.gov.uk/view-prove-immigration-status</a>
          </div>

          <a class="v2-help" style= 'margin-left:6px; margin-top:18px' onclick="$('.share-code-info').show()">
            <i class="glyphicon glyphicon-question-sign"></i>
          </a>
        </div>
      </div>
    </div>
  </div>

  <div style='margin-left: 40px; max-width: 444px'>
    <div class="v2-profile-identification-uk">Work Visa</div>

    <div class="d-flex flex-row bd-highlight">
      <div class="d-flex flex-column bd-highlight" style='margin-top: 15px;'>
        <div class="d-flex">

          <div class="d-flex flex-row bd-highlight v2-id-login-date-input-group">
            <div><span>Expiry Date</span></div>
            <%= select_date @prospect ? @prospect.visa_expiry : nil, {prefix: 'visa_expiry', start_year: Date.today.year, end_year: Date.today.year+10, order: [:day, :month, :year], :prompt => { :day => 'Day', :month => 'Month', :year => 'Year' }, use_short_month: true}, {required: true, class: "date-check-3 form-control v2-profile-identification-date-select v2-inputs"} %>
          </div>
        </div>
        <div class="d-flex">
          <div class='v2-application-checkbox' style= 'margin-left:44px; margin-top:17px'>
            <input id="visa-indefinite" name="visa_indefinite" type="checkbox" class='form-check-input v2-profile-identification-checkbox' onchange="onChangeIndefinite()">

            <label for="visa-indefinite" class='form-check-label v2-profile-identification-checkbox-label' style='margin-left:0;'>Indefinite Leave to Remain</label>
          </div>

          <a class="v2-help" style= 'margin-left:14px; margin-top:18px' onclick="$('.non-eu-id-indefinite-popup').show()">
            <i class="glyphicon glyphicon-question-sign"></i>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="share-code-info sample-popup v2-id-pic-pop-up" style="display:none;">
  <div class="v2-id-pic-pop-up-body d-flex flex-column text-center" style="max-width: 500px">
    <h3>UK Immigration Digital Checks</h3>
    <span style='margin-top: 18px; font-size: 19px'><strong>Share code?</strong></span>
    <span>Migrant workers can now prove their Right To Work by giving an employer a 'share code' which is generated by the UK immigration service so employers can now check your status digitally.</span>
    <span style='margin-top: 18px; font-size: 19px'><strong>Share codes are valid for 90 days</strong></span>
    <span>Visit the below link to generate a 'share code'.</span>
    <a href="https://www.gov.uk/view-prove-immigration-status" target="_blank" style='margin-left:0; margin-top: 8px;'>www.gov.uk/view-prove-immigration-status</a>
    <span style='margin-top: 18px;'>Once Flair has recorded the information provided, your profile will be complete and you're ready to start work.</span>
    <a class="fl-flash__close-btn" onclick="$('.v2-id-pic-pop-up').hide()">
      <span>Close</span>
    </a>
  </div>
</div>
<div class="non-eu-id-indefinite-popup sample-popup v2-id-pic-pop-up" style="display:none">
  <div class="v2-id-pic-pop-up-body">
    <%= image_tag 'id-sample-non-eu-brp-indefinite.jpg' %>
    <a class="fl-flash__close-btn" onclick="$('.v2-id-pic-pop-up').hide()">
      <span>Close</span>
    </a>
  </div>
</div>
<% content_for :js do %>
  <script>
    function onChangeIndefinite() {
      if($('#visa-indefinite').prop('checked')) {
        $('#visa_expiry_day').prop('required',false);
        $('#visa_expiry_month').prop('required',false);
        $('#visa_expiry_year').prop('required',false);
      } else {
        $('#visa_expiry_day').prop('required',true);
        $('#visa_expiry_month').prop('required',true);
        $('#visa_expiry_year').prop('required',true);
      }
    }
  </script>
<% end %>